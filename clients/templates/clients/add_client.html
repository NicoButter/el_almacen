{% extends 'base.html' %}
{% load static %}
{% load form_tags %}

{% block extra_styles %}
    <link href="{% static 'dashboards/css/admin_dashboard_styles.css' %}" rel="stylesheet">
{% endblock %}

{% block body_class %}dashboard-page{% endblock %}

{% block content %}
<div class="dashboard-fullwidth-container">
    <div class="dashboard-shell">
        <aside class="dashboard-sidebar glass-custom">
            <div class="sidebar-header">
                <img src="{% static 'images/el_almacen_logo.png' %}" alt="El Almacén" class="sidebar-logo">
                <div class="sidebar-business">
                    <span class="business-name">El Almacén</span>
                    <span class="business-tagline">Panel administrativo</span>
                </div>
            </div>
            <nav class="sidebar-nav" aria-label="Navegación principal">
                <a href="{% url 'dashboard:admin_dashboard' %}" class="sidebar-link{% if request.resolver_match.url_name == 'admin_dashboard' %} is-active{% endif %}" {% if request.resolver_match.url_name == 'admin_dashboard' %}aria-current="page"{% endif %}>
                    <span class="sidebar-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="3" y="3" width="7" height="7" rx="1.2" stroke="currentColor" stroke-width="1.5"/>
                            <rect x="14" y="3" width="7" height="7" rx="1.2" stroke="currentColor" stroke-width="1.5"/>
                            <rect x="3" y="14" width="7" height="7" rx="1.2" stroke="currentColor" stroke-width="1.5"/>
                            <rect x="14" y="14" width="7" height="7" rx="1.2" stroke="currentColor" stroke-width="1.5"/>
                        </svg>
                    </span>
                    <span class="sidebar-label">Dashboard</span>
                </a>
                <a href="{% url 'listar_productos' %}" class="sidebar-link{% if request.resolver_match.url_name == 'listar_productos' %} is-active{% endif %}" {% if request.resolver_match.url_name == 'listar_productos' %}aria-current="page"{% endif %}>
                    <span class="sidebar-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M21 16V8a1 1 0 0 0-.553-.894l-8-4a1 1 0 0 0-.894 0l-8 4A1 1 0 0 0 3 8v8a1 1 0 0 0 .553.894l8 4a1 1 0 0 0 .894 0l8-4A1 1 0 0 0 21 16z" stroke="currentColor" stroke-width="1.4"/>
                            <path d="M3.27 6.96 12 11l8.73-4.04" stroke="currentColor" stroke-width="1.4"/>
                        </svg>
                    </span>
                    <span class="sidebar-label">Productos</span>
                </a>
                <a href="{% url 'listar_categorias' %}" class="sidebar-link">
                    <span class="sidebar-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="m12 3 9 5-9 5-9-5 9-5z" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/>
                            <path d="m21 13-9 5-9-5" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/>
                            <path d="m21 17-9 5-9-5" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/>
                        </svg>
                    </span>
                    <span class="sidebar-label">Categorías</span>
                </a>
                <a href="{% url 'listar_clientes' %}" class="sidebar-link{% if request.resolver_match.url_name == 'listar_clientes' or request.resolver_match.url_name == 'agregar_cliente' %} is-active{% endif %}" {% if request.resolver_match.url_name == 'listar_clientes' or request.resolver_match.url_name == 'agregar_cliente' %}aria-current="page"{% endif %}>
                    <span class="sidebar-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M17 21v-2a4 4 0 0 0-4-4H9a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="1.4"/>
                            <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="1.4"/>
                        </svg>
                    </span>
                    <span class="sidebar-label">Clientes</span>
                </a>
                <a href="{% url 'sales:sales_dashboard' %}" class="sidebar-link">
                    <span class="sidebar-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M3 3h2l2 14h12" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                            <circle cx="10" cy="20" r="1" stroke="currentColor" stroke-width="1.4"/>
                            <circle cx="18" cy="20" r="1" stroke="currentColor" stroke-width="1.4"/>
                            <path d="M7 7h14l-2 7H9" stroke="currentColor" stroke-width="1.4" stroke-linecap="round" stroke-linejoin="round"/>
                        </svg>
                    </span>
                    <span class="sidebar-label">Ventas</span>
                </a>
                <a href="{% url 'sales:ticket_list' %}" class="sidebar-link">
                    <span class="sidebar-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M7 4h10a1 1 0 0 1 1 1v15l-3-2-3 2-3-2-3 2V5a1 1 0 0 1 1-1z" stroke="currentColor" stroke-width="1.4" stroke-linejoin="round"/>
                            <path d="M9 9h6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
                            <path d="M9 13h6" stroke="currentColor" stroke-width="1.4" stroke-linecap="round"/>
                        </svg>
                    </span>
                    <span class="sidebar-label">Tickets</span>
                </a>
                <a href="{% url 'reports_dashboard' %}" class="sidebar-link">
                    <span class="sidebar-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <path d="M9 5H7a2 2 0 0 0-2 2v12a2 2 0 0 0 2 2h10a2 2 0 0 0 2-2V7a2 2 0 0 0-2-2h-2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            <rect x="9" y="3" width="6" height="4" rx="1" stroke="currentColor" stroke-width="1.5"/>
                            <path d="M9 12h6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            <path d="M9 16h6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                        </svg>
                    </span>
                    <span class="sidebar-label">Reportes</span>
                </a>
                <a href="{% url 'gestion_cuentas_corrientes' %}" class="sidebar-link">
                    <span class="sidebar-icon">
                        <svg width="18" height="18" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                            <rect x="2" y="5" width="20" height="14" rx="2" stroke="currentColor" stroke-width="1.4"/>
                            <path d="M2 10h20" stroke="currentColor" stroke-width="1.4"/>
                            <path d="M7 15h.01" stroke="currentColor" stroke-width="2" stroke-linecap="round"/>
                        </svg>
                    </span>
                    <span class="sidebar-label">Cuentas Corrientes</span>
                </a>
            </nav>
        </aside>

        <main class="dashboard-main">
            <header class="dashboard-header">
                <div class="header-content">
                    <h1 class="page-title">
                        <span class="title-icon">
                            <svg width="24" height="24" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg">
                                <path d="M12 4v16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                                <path d="M4 12h16" stroke="currentColor" stroke-width="1.5" stroke-linecap="round"/>
                            </svg>
                        </span>
                        Agregar Nuevo Cliente
                    </h1>
                    <p class="page-subtitle">Registra un nuevo cliente en el sistema</p>
                </div>
            </header>

            <div class="content-section">
                <div class="form-container glass-custom">
                    {% if messages %}
                    <div class="alert-section">
                        {% for message in messages %}
                        <div class="alert alert-success">
                            <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="alert-icon">
                                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                <polyline points="22,4 12,14.01 9,11.01" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                            </svg>
                            {{ message }}
                        </div>
                        {% endfor %}
                    </div>
                    {% endif %}

                    <form method="POST" class="modern-form">
                        {% csrf_token %}

                        <div class="form-grid">
                            <div class="form-group">
                                <label for="{{ cliente_form.nombre.id_for_label }}" class="form-label">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="label-icon">
                                        <path d="M20 21v-2a4 4 0 0 0-4-4H8a4 4 0 0 0-4 4v2" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <circle cx="12" cy="7" r="4" stroke="currentColor" stroke-width="1.5"/>
                                    </svg>
                                    Nombre
                                </label>
                                {{ cliente_form.nombre|add_class:"form-input" }}
                                {% if cliente_form.nombre.errors %}
                                <div class="field-errors">
                                    {% for error in cliente_form.nombre.errors %}
                                    <span class="error-message">{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>

                            <div class="form-group">
                                <label for="{{ telefono_form.numero.id_for_label }}" class="form-label">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="label-icon">
                                        <path d="M22 16.92v3a2 2 0 0 1-2.18 2 19.79 19.79 0 0 1-8.63-3.07 19.5 19.5 0 0 1-6-6 19.79 19.79 0 0 1-3.07-8.67A2 2 0 0 1 4.11 2h3a2 2 0 0 1 2 1.72 12.84 12.84 0 0 0 .7 2.81 2 2 0 0 1-.45 2.11L8.09 9.91a16 16 0 0 0 6 6l1.27-1.27a2 2 0 0 1 2.11-.45 12.84 12.84 0 0 0 2.81.7A2 2 0 0 1 22 16.92z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                    Teléfono
                                </label>
                                {{ telefono_form.numero|add_class:"form-input" }}
                                {% if telefono_form.numero.errors %}
                                <div class="field-errors">
                                    {% for error in telefono_form.numero.errors %}
                                    <span class="error-message">{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>

                            <div class="form-group">
                                <label for="{{ direccion_form.direccion.id_for_label }}" class="form-label">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="label-icon">
                                        <path d="M21 10c0 7-9 13-9 13s-9-6-9-13a9 9 0 0 1 18 0z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <circle cx="12" cy="10" r="3" stroke="currentColor" stroke-width="1.5"/>
                                    </svg>
                                    Dirección
                                </label>
                                {{ direccion_form.direccion|add_class:"form-input" }}
                                {% if direccion_form.direccion.errors %}
                                <div class="field-errors">
                                    {% for error in direccion_form.direccion.errors %}
                                    <span class="error-message">{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>

                            <div class="form-group">
                                <label for="{{ email_form.email.id_for_label }}" class="form-label">
                                    <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="label-icon">
                                        <path d="M4 4h16c1.1 0 2 .9 2 2v12c0 1.1-.9 2-2 2H4c-1.1 0-2-.9-2-2V6c0-1.1.9-2 2-2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                        <polyline points="22,6 12,13 2,6" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    </svg>
                                    Email
                                </label>
                                {{ email_form.email|add_class:"form-input" }}
                                {% if email_form.email.errors %}
                                <div class="field-errors">
                                    {% for error in email_form.email.errors %}
                                    <span class="error-message">{{ error }}</span>
                                    {% endfor %}
                                </div>
                                {% endif %}
                            </div>
                        </div>

                        <div class="form-actions">
                            <button type="submit" class="btn-primary">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="btn-icon">
                                    <path d="M19 21H5a2 2 0 0 1-2-2V5a2 2 0 0 1 2-2h11l5 5v11a2 2 0 0 1-2 2z" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <polyline points="17,21 17,13 7,13 7,21" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <polyline points="7,3 7,8 15,8" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Guardar Cliente
                            </button>
                            <a href="{% url 'listar_clientes' %}" class="btn-secondary">
                                <svg width="16" height="16" viewBox="0 0 24 24" fill="none" xmlns="http://www.w3.org/2000/svg" class="btn-icon">
                                    <path d="M19 12H5" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                    <path d="M12 19l-7-7 7-7" stroke="currentColor" stroke-width="1.5" stroke-linecap="round" stroke-linejoin="round"/>
                                </svg>
                                Cancelar
                            </a>
                        </div>
                    </form>
                </div>
            </div>
        </main>
    </div>
</div>

{% endblock %}
